{% extends 'base.html' %}

{% block content %}
<div class="note_detail">
    <div>
        <button class="btn"><a href="{% url 'note_delete' note_detail.id %}">삭제</a></button>
        <button class="btn"><a href="{% url 'box' %}">쪽지함</a></button>
        
        {% if note_detail.sender == request.user %}
            <p><strong>받는 사람: {{note_detail.receiver}}</strong></p>
        {% else %}
            <p><strong>보낸 사람: {{note_detail.sender}}</strong></p>
        {% endif %}

        <p>{{note_detail.date|date:"Y.m.d"}}</p>
        <p>{{note_detail.content}}</p>
    </div>
    <hr>

    <!--답장 작성하는 폼-->
    <form method="POST" action="{% url 'renote' note_detail.id %}">
        {% csrf_token %}
        {{renote_form}}
        <input type="submit" value="보내기" class="renote_btn">
    </form>
    <br>

     <!--해당 쪽지에 대한 답장 목록
        ReNote가 Note를 외래키로 참조하기 때문에 아래와 같이 작성이 가능-->
    {% for renote in note_detail.renote_set.all %}
        <p><strong>{{renote.author}}</strong>_{{renote.time|date:"Y.m.d"}}</p>
        <p>{{renote.content}} </p>
        <hr>
    {% endfor %}
</div>

<!-- footer -->
    <footer>
        <div class="container">
            <div class="row">
                <div class="col-md-4">
                    <p>Copyright &copy; 2020 LikeLion Hackathon</p>
                </div>
                <div class="col-md-4">
                    <ul class="social-icons">
                        <li><a rel="nofollow" href="https://fb.com/templatemo"><i class="fa fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fa fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fa fa-linkedin"></i></a></li>
                        <li><a href="#"><i class="fa fa-rss"></i></a></li>
                        <li><a href="#"><i class="fa fa-dribbble"></i></a></li>
                    </ul>
                </div>
                <div class="col-md-4">
                    <p>Team name: I, DDingDong</p>
                </div>
            </div>
        </div>
    </footer>
{% endblock %} 